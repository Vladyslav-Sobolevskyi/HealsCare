class Filter{constructor(e){this.loader=e,this.root=document.querySelector("#root"),this.input=document.querySelector("#filtered-input"),this.statusSelect=document.querySelector("#select-status"),this.urgencySelect=document.querySelector("#select-urgency"),this.statusSelectValue=localStorage.getItem("statusSelectValue"),this.urgencySelectValue=localStorage.getItem("urgencySelectValue"),this.statusSelectValue&&this.urgencySelectValue&&(this.statusSelect.value=this.statusSelectValue,this.urgencySelect.value=this.urgencySelectValue),this._initFilterListeners()}setVisitorCard(e){this.visitorCard=e}setCards(e){0===e.length&&this.loader.toggle(!1),this.originalCards=[...e],this.filteredCards=[],this.filterAndRender()}setNewCard(e){0===e.length&&this.loader.toggle(!1),this.originalCards=[...this.originalCards,e],this.filterAndRender()}removeCard(e){this.originalCards=this.originalCards.filter((t=>t.id!==e)),this.filterAndRender()}_initFilterListeners(){this.input.addEventListener("input",(()=>this.filterAndRender())),[this.statusSelect,this.urgencySelect].forEach((e=>{e.addEventListener("change",(()=>{localStorage.setItem("statusSelectValue",this.statusSelect.value),localStorage.setItem("urgencySelectValue",this.urgencySelect.value),this.filterAndRender()}))}))}filterAndRender(){this.filteredCards=[];const e=this.input.value.toLowerCase(),t=this.statusSelect.value,s=this.urgencySelect.value;this.originalCards.forEach((i=>{const r=i.nameVisitor.toLowerCase().includes(e)||i.descriptionVisit.toLowerCase().includes(e)||i.briefDescriptionVisit.toLowerCase().includes(e),l="all-status"===t||i.statusVisit===t,a="all-urgency"===s||i.urgencyVisit===s;r&&l&&a&&this.filteredCards.push(i)})),this.root.innerHTML="",this.visitorCard.renderCards(this.filteredCards)}}export default Filter;