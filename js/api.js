class Api{constructor(){this.token=localStorage.getItem("token"),this.URL="https://ajax.test-danit.com/api/v2/cards"}async login({email:t,password:o}){try{const e=await fetch(`${this.URL}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:`${t}`,password:`${o}`})});if(!e.ok)throw new Error(`Помилка авторизації: ${e.status}`);const r=await e.text();return this.token=r,r}catch(t){console.error("Помилка при отриманні токену:",t)}}async getVisits(t){try{const o=t?`${this.URL}/${t}`:this.URL,e=await fetch(o,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(t){console.error("Помилка при отриманні візитів:",t)}}async createVisit(t){try{const o=await fetch(this.URL,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify(t)}),e=await o.json();return console.log("new data:",e),e}catch(t){console.error("Помилка при створенні візиту:",t)}}async editVisit(t){try{const o=await fetch(`${this.URL}/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify(t)});return await o.json()}catch(t){console.error("Помилка при редануванні візиту:",t)}}async deleteVisit(t){try{const o=await fetch(`${this.URL}/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${this.token}`}}),e=await o;if(console.log(e),200===e.status)return!0;throw new Error(`Помилка з кодом: ${o.status}`)}catch(t){console.error("Помилка при видаленні візиту:",t)}}}export default Api;