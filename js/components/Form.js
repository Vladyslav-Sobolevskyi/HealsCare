class Form{constructor(e,t,o,r,n){this.headerController=e,this.loader=n,this.api=t,this.modal=o,this.toggleStartBlock=r,this.form=this._createForm(),this.formHeader=this.form.querySelector(".form__header"),this.formBody=this.form.querySelector(".form__body"),this.formFooter=this.form.querySelector(".form__footer")}setVisitorCard(e){this.visitorCard=e}_createForm(){const e=document.createElement("form");e.className="form";const t=document.createElement("div");t.className="form__header";const o=document.createElement("div");o.className="form__body";const r=document.createElement("div");return r.className="form__footer",e.append(t,o,r),e}_clearForm(){const e=this._createForm();this.form.replaceWith(e),this.form=e,this.formHeader=this.form.querySelector(".form__header"),this.formBody=this.form.querySelector(".form__body"),this.formFooter=this.form.querySelector(".form__footer")}_renderField(e,t,o,r,n){const s=document.createElement("div");s.className="form__field";const a=document.createElement("label");a.className="form__label",a.setAttribute("for",e),a.textContent=t;const m=document.createElement("input");return m.className="form__input",m.id=e,m.type=o,m.placeholder=r,m.required=n,s.append(a,m),s}_renderButton(e,t,o){const r=document.createElement("button");return r.type=e,r.className=t,r.textContent=o,r}_renderCancelButton(){const e=this._renderButton("button","form__button form__button--cancel","Cancel");return e.addEventListener("click",(e=>{e.preventDefault(),this.modal.close()})),e}_renderSelect({id:e,className:t,options:o}){const r=document.createElement("select");return r.id=e,r.className=t,o.forEach((e=>{const t=document.createElement("option");t.value=e.value,t.className=e.className,t.textContent=e.textContent,r.appendChild(t)})),r}logIn(){this._clearForm();const e=document.createElement("h2");e.textContent="Welcome to HealsCare!";const t=this._renderField("email","Email","email","Enter your Email",!0),o=this._renderField("password","Password","password","Enter your Password",!0),r=this._renderButton("submit","form__button form__button--submit","Log In");return this.form.addEventListener("submit",(async e=>{e.preventDefault();const t={};this.form.querySelectorAll("input").forEach((e=>{t[e.id]=e.value}));const o=await this.api.login(t);o?(localStorage.setItem("token",o),this._clearForm(),this.modal.close(),this.headerController.createLogOut(),this.visitorCard.getAllCards()):alert("Невірні дані авторизації")})),this.formHeader.append(e),this.formBody.append(t,o),this.formFooter.append(r,this._renderCancelButton()),this.form}logOut(){this._clearForm();const e=document.createElement("h2");e.textContent="Are you sure you want to exit the system?";const t=this._renderButton("button","form__button form__button--exit","Exit");return t.addEventListener("click",(e=>{e.preventDefault(),this.loader.toggle(!0),localStorage.removeItem("token"),this.headerController.createLogIn(),this._clearForm(),this.modal.close();document.querySelector("#root").innerHTML="",this.toggleStartBlock(),this.loader.toggle(!1)})),this.formHeader.append(e),this.formFooter.append(t,this._renderCancelButton()),this.form}}export default Form;